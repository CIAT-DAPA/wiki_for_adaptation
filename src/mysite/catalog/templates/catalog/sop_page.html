{% extends "catalog/catalog_base.html" %}
{% load wagtailcore_tags %}

{% block sidebar_contents %}
  {% if page.definition %}
  <li><a href="#definition" class="text-gray-700 hover:text-brand-green">Definition</a></li>
  {% endif %}
  {% if page.data_sources %}
  <li><a href="#data-sources" class="text-gray-700 hover:text-brand-green">Data Sources</a></li>
  {% endif %}
  {% if page.units %}
  <li><a href="#units" class="text-gray-700 hover:text-brand-green">Units</a></li>
  {% endif %}
  {% if page.frequency %}
  <li><a href="#frequency" class="text-gray-700 hover:text-brand-green">Frequency</a></li>
  {% endif %}
  {% if page.geographic_scale %}
  <li><a href="#geographic-scale" class="text-gray-700 hover:text-brand-green">Geographic Scale</a></li>
  {% endif %}
  {% if page.technical_capacity %}
  <li><a href="#technical-capacity" class="text-gray-700 hover:text-brand-green">Technical Capacity</a></li>
  {% endif %}
  {% if page.activities_and_steps %}
  <li><a href="#activities" class="text-gray-700 hover:text-brand-green">Activities and Steps</a></li>
  {% endif %}
  {% if page.options_enhancing_robustness %}
  <li><a href="#robustness" class="text-gray-700 hover:text-brand-green">Enhancing Robustness</a></li>
  {% endif %}
  {% if page.options_reducing_costs %}
  <li><a href="#costs" class="text-gray-700 hover:text-brand-green">Reducing Costs</a></li>
  {% endif %}
  {% if page.available_tools_and_code %}
  <li><a href="#tools" class="text-gray-700 hover:text-brand-green">Tools and Code</a></li>
  {% endif %}
  {% if page.references %}
  <li><a href="#references" class="text-gray-700 hover:text-brand-green">References</a></li>
  {% endif %}
  {% if page.visual_content %}
  <li><a href="#visual" class="text-gray-700 hover:text-brand-green">Visual Content</a></li>
  {% endif %}
  {% if page.flagship_method_status %}
  <li><a href="#flagship" class="text-gray-700 hover:text-brand-green">Flagship Method Status</a></li>
  {% endif %}
{% endblock %}

{% block article_content %}
    <header class="mb-6 pb-4 border-b-2 border-gray-200">
      <span class="inline-block bg-brand-orange text-white text-xs font-bold uppercase px-3 py-1 rounded mb-2">SOP (Standard Operating Procedure)</span>
      <h1 class="text-4xl font-bold text-gray-900 mb-2">{{ page.title }}</h1>
      <p class="text-gray-500 text-sm flex items-center gap-4">
        <span><i class="fas fa-user text-gray-400 mr-1"></i> Dr. {{ page.entry_author|default:"Unknown" }}</span>
        <span><i class="fas fa-calendar text-gray-400 mr-1"></i> {{ page.first_published_at|date:"m/d/Y" }}</span>
      </p>
    </header>

    {% if page.definition %}
    <section id="definition" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Definition</h2>
      <div class="prose prose-sm max-w-none">{{ page.definition|richtext }}</div>
    </section>
    {% endif %}

    {% if page.data_sources %}
    <section id="data-sources" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">
        <i class="fas fa-database text-gray-700 mr-2"></i>Data Sources
      </h2>
      <div class="prose prose-sm max-w-none">{{ page.data_sources|richtext }}</div>
    </section>
    {% endif %}

    <section class="grid md:grid-cols-2 gap-6 my-6">
      {% if page.units %}
      <section id="units" class="bg-white border border-gray-200 rounded-lg shadow-sm p-5 scroll-mt-20">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="fas fa-ruler text-gray-600 mr-2"></i>Units
        </h3>
        <div class="text-gray-700">{{ page.units }}</div>
      </section>
      {% endif %}

      {% if page.frequency %}
      <section id="frequency" class="bg-white border border-gray-200 rounded-lg shadow-sm p-5 scroll-mt-20">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="far fa-clock text-gray-600 mr-2"></i>Frequency
        </h3>
        <div class="text-gray-700">{{ page.frequency }}</div>
      </section>
      {% endif %}

      {% if page.geographic_scale %}
      <section id="geographic-scale" class="bg-white border border-gray-200 rounded-lg shadow-sm p-5 scroll-mt-20">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="fas fa-map-marker-alt text-gray-600 mr-2"></i>Geographic Scale
        </h3>
        <div class="text-gray-700">{{ page.geographic_scale }}</div>
      </section>
      {% endif %}

      {% if page.technical_capacity %}
      <section id="technical-capacity" class="bg-white border border-gray-200 rounded-lg shadow-sm p-5 scroll-mt-20">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="fas fa-wrench text-gray-600 mr-2"></i>Technical Capacity
        </h3>
        <div class="prose prose-sm max-w-none text-gray-700">{{ page.technical_capacity|richtext }}</div>
      </section>
      {% endif %}
    </section>

    {% if page.activities_and_steps %}
    <section id="activities" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Activities and Steps</h2>
      <div class="prose prose-sm max-w-none">{{ page.activities_and_steps|richtext }}</div>
    </section>
    {% endif %}

    {% if page.options_enhancing_robustness %}
    <section id="robustness" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Options for Enhancing Robustness</h2>
      <div class="prose prose-sm max-w-none">{{ page.options_enhancing_robustness|richtext }}</div>
    </section>
    {% endif %}

    {% if page.options_reducing_costs %}
    <section id="costs" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Options for Reducing Costs</h2>
      <div class="prose prose-sm max-w-none">{{ page.options_reducing_costs|richtext }}</div>
    </section>
    {% endif %}

    {% if page.available_tools_and_code %}
    <section id="tools" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Available Tools and Code</h2>
      <div class="prose prose-sm max-w-none">{{ page.available_tools_and_code|richtext }}</div>
    </section>
    {% endif %}

    {% if page.references %}
    <section id="references" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">References</h2>
      <div class="prose prose-sm max-w-none">{{ page.references|richtext }}</div>
    </section>
    {% endif %}

    {% if page.visual_content %}
    <section id="visual" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Visual Content</h2>
      <div class="prose prose-sm max-w-none">{{ page.visual_content|richtext }}</div>
    </section>
    {% endif %}

    {% if page.flagship_method_status %}
    <section id="flagship" class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4 scroll-mt-20">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Flagship Method Status</h2>
      <div class="prose prose-sm max-w-none">{{ page.flagship_method_status|richtext }}</div>
    </section>
    {% endif %}
{% endblock %}
