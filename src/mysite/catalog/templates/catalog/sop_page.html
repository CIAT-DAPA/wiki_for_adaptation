{% extends "base.html" %}
{% load wagtailcore_tags %}

{% block content %}
  <article class="max-w-5xl mx-auto px-4 py-6">
    <header class="mb-6 pb-4 border-b-2 border-gray-200">
      <span class="inline-block bg-brand-orange text-white text-xs font-bold uppercase px-3 py-1 rounded mb-2">SOP (Standard Operating Procedure)</span>
      <h1 class="text-4xl font-bold text-gray-900 mb-2">{{ page.title }}</h1>
      <p class="text-gray-500 text-sm flex items-center gap-4">
        <span><i class="fas fa-user text-gray-400 mr-1"></i> Dr. {{ page.entry_author|default:"Unknown" }}</span>
        <span><i class="fas fa-calendar text-gray-400 mr-1"></i> {{ page.first_published_at|date:"m/d/Y" }}</span>
      </p>
    </header>

    {% if page.definition %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Definition</h2>
      <div class="prose prose-sm max-w-none">{{ page.definition|safe }}</div>
    </section>
    {% endif %}

    {% if page.data_sources %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">
        <i class="fas fa-database text-gray-700 mr-2"></i>Data Sources
      </h2>
      <div class="prose prose-sm max-w-none">{{ page.data_sources|safe }}</div>
    </section>
    {% endif %}

    <section class="grid md:grid-cols-2 gap-6 my-6">
      {% if page.units %}
      <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-5">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="fas fa-ruler text-gray-600 mr-2"></i>Units
        </h3>
        <div class="text-gray-700">{{ page.units }}</div>
      </section>
      {% endif %}

      {% if page.frequency %}
      <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-5">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="far fa-clock text-gray-600 mr-2"></i>Frequency
        </h3>
        <div class="text-gray-700">{{ page.frequency }}</div>
      </section>
      {% endif %}

      {% if page.geographic_scale %}
      <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-5">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="fas fa-map-marker-alt text-gray-600 mr-2"></i>Geographic Scale
        </h3>
        <div class="text-gray-700">{{ page.geographic_scale }}</div>
      </section>
      {% endif %}

      {% if page.technical_capacity %}
      <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-5">
        <h3 class="text-base font-semibold text-gray-900 mb-2 flex items-center">
          <i class="fas fa-wrench text-gray-600 mr-2"></i>Technical Capacity
        </h3>
        <div class="prose prose-sm max-w-none text-gray-700">{{ page.technical_capacity|safe }}</div>
      </section>
      {% endif %}
    </section>

    {% if page.activities_and_steps %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Activities and Steps</h2>
      <div class="prose prose-sm max-w-none">{{ page.activities_and_steps|safe }}</div>
    </section>
    {% endif %}

    {% if page.options_enhancing_robustness %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Options for Enhancing Robustness</h2>
      <div class="prose prose-sm max-w-none">{{ page.options_enhancing_robustness|safe }}</div>
    </section>
    {% endif %}

    {% if page.options_reducing_costs %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Options for Reducing Costs</h2>
      <div class="prose prose-sm max-w-none">{{ page.options_reducing_costs|safe }}</div>
    </section>
    {% endif %}

    {% if page.available_tools_and_code %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Available Tools and Code</h2>
      <div class="prose prose-sm max-w-none">{{ page.available_tools_and_code|safe }}</div>
    </section>
    {% endif %}

    {% if page.references %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">References</h2>
      <div class="prose prose-sm max-w-none">{{ page.references|safe }}</div>
    </section>
    {% endif %}

    {% if page.visual_content %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Visual Content</h2>
      <div class="prose prose-sm max-w-none">{{ page.visual_content|safe }}</div>
    </section>
    {% endif %}

    {% if page.flagship_method_status %}
    <section class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 mb-4">
      <h2 class="text-2xl font-semibold text-gray-900 mb-3">Flagship Method Status</h2>
      <div class="prose prose-sm max-w-none">{{ page.flagship_method_status|safe }}</div>
    </section>
    {% endif %}
  </article>
{% endblock %}
