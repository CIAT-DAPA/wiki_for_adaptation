{% extends "base.html" %}
{% load wagtailcore_tags %}

{% block content %}
<div class="max-w-7xl mx-auto px-4 py-6 flex gap-8">
  <!-- Left Sidebar -->
  <aside class="hidden lg:block w-64 flex-shrink-0">
    <div class="sticky top-20 space-y-6">
      <!-- Contents Navigation -->
      <nav class="bg-white border border-gray-200 rounded-lg p-4">
        <h2 class="flex items-center gap-2 text-lg font-bold text-gray-900 mb-4">
          <i class="fas fa-bars text-gray-600"></i>
          Contents
        </h2>
        <ul class="space-y-2 text-sm">
          {% block sidebar_contents %}
          {# Each page template will define its own content navigation #}
          {% endblock %}
        </ul>
      </nav>

      <!-- Site Map Navigation -->
      <nav class="bg-white border border-gray-200 rounded-lg p-4">
        <h2 class="flex items-center gap-2 text-lg font-bold text-gray-900 mb-4">
          <i class="fas fa-bars text-gray-600"></i>
          Site map
        </h2>
        <ul class="space-y-2 text-sm">
          <li>
            <button class="flex items-center justify-between w-full text-gray-700 hover:text-brand-green font-medium" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('i').classList.toggle('fa-chevron-down'); this.querySelector('i').classList.toggle('fa-chevron-up');">
              <span>Tracking Methods</span>
              <i class="fas fa-chevron-down text-xs"></i>
            </button>
            <ul class="ml-4 mt-2 space-y-1.5 hidden">
              <li><a href="/impact-pathways/guidance" class="text-gray-600 hover:text-brand-green text-xs">Guidance: Project vs Policy Level</a></li>
              <li><a href="/tracking-framework#tracking-framework" class="text-gray-600 hover:text-brand-green text-xs">Tracking Framework</a></li>
              <li><a href="/tracking-framework#indicator-framework" class="text-gray-600 hover:text-brand-green text-xs">Indicator Framework</a></li>
              <li><a href="/tracking-framework#selection-criteria" class="text-gray-600 hover:text-brand-green text-xs">Selection Criteria</a></li>
            </ul>
          </li>
          <li><a href="/search/?category=indicator" class="text-gray-700 hover:text-brand-green">Indicator list</a></li>
          <li>
            <button class="flex items-center justify-between w-full text-gray-700 hover:text-brand-green font-medium" onclick="this.nextElementSibling.classList.toggle('hidden'); this.querySelector('i').classList.toggle('fa-chevron-down'); this.querySelector('i').classList.toggle('fa-chevron-up');">
              <span>Help & Colab</span>
              <i class="fas fa-chevron-down text-xs"></i>
            </button>
            <ul class="ml-4 mt-2 space-y-1.5 hidden">
              <li><a href="/wiki-instructions" class="text-gray-600 hover:text-brand-green text-xs">Wiki instructions</a></li>
              <li><a href="/become-editor" class="text-gray-600 hover:text-brand-green text-xs">Become an editor</a></li>
              <li><a href="/faq" class="text-gray-600 hover:text-brand-green text-xs">FAQ</a></li>
              <li><a href="/feedback" class="text-gray-600 hover:text-brand-green text-xs">Feedback/Corrections</a></li>
            </ul>
          </li>
          <li><a href="/about" class="text-gray-700 hover:text-brand-green">About us</a></li>
        </ul>
      </nav>
    </div>
  </aside>

  <!-- Main Content -->
  <article class="flex-1 min-w-0">
    {% block article_content %}
    {# Each page template will define its main content here #}
    {% endblock %}
  </article>
</div>

<script>
// Smooth scroll for anchor links (only within article and aside)
document.querySelectorAll('article a[href^="#"], aside a[href^="#"]').forEach(anchor => {
  anchor.addEventListener('click', function (e) {
    e.preventDefault();
    const target = document.querySelector(this.getAttribute('href'));
    if (target) {
      target.scrollIntoView({ behavior: 'smooth' });
    }
  });
});
</script>
{% endblock %}
